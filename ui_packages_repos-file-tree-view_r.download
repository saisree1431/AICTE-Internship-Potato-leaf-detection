"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_feature-request_FeatureR-648c3b"],{31871:(e,t,r)=>{r.d(t,{Z:()=>n});function n({appendQuery:e,retainScrollPosition:t,returnTarget:r}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:r}}))}},46695:(e,t,r)=>{function n(e){return a(e)[0]}function a(e){let t=[];for(let r of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[n,a]=r.trim().split("=");e===n&&void 0!==a&&t.push({key:n,value:a})}return t}function i(e,t,r=null,n=!1,a="lax"){let l=document.domain;if(null==l)throw Error("Unable to get document domain");l.endsWith(".github.com")&&(l="github.com");let o="https:"===location.protocol?"; secure":"",s=r?`; expires=${r}`:"";!1===n&&(l=`.${l}`);try{document.cookie=`${e}=${t}; path=/; domain=${l}${s}${o}; samesite=${a}`}catch{}}function l(e,t=!1){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let n=new Date(Date.now()-1).toUTCString(),a="https:"===location.protocol?"; secure":"",i=`; expires=${n}`;!1===t&&(r=`.${r}`);try{document.cookie=`${e}=''; path=/; domain=${r}${i}${a}`}catch{}}r.d(t,{OR:()=>a,Ri:()=>n,TV:()=>i,Yj:()=>l})},63599:(e,t,r)=>{r.d(t,{U:()=>i});let n=e=>{let t=getComputedStyle(e,null);return["overflow","overflow-y","overflow-x"].some(e=>{let r=t.getPropertyValue(e);return"auto"===r||"scroll"===r})},a=(e,t)=>e&&null!==e.parentNode?a(e.parentNode,t.concat([e])):t;function i(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of a(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&n(t))return t;return document.scrollingElement||document.documentElement}}},63872:(e,t,r)=>{r.d(t,{Nq:()=>W,H:()=>h,c2:()=>eo,Uy:()=>M,qn:()=>ex});var n=r(74848),a=r(53665),i=r(40256),l=r(63189),o=r(2703),s=r(38621),c=r(55847),d=r(20053),u=r(96540);let p={expandButton:"ExpandFileTreeButton-module__expandButton--gL4is",filesButtonBreakpoint:"ExpandFileTreeButton-module__filesButtonBreakpoint--WfX9t"},m=u.forwardRef(({expanded:e,onToggleExpanded:t,className:r,ariaControls:u,textAreaId:m,useFilesButtonBreakpoint:f=!0,variant:h,getTooltipDirection:x},g)=>{let{toggleTreeShortcut:y}=(0,i.wk)(),[w]=(0,o.I)(()=>!1,!0,[]),b=x?.(e)??"se";return(0,n.jsxs)(n.Fragment,{children:[f&&(!e||w)&&(0,n.jsx)(c.Q,{"aria-label":"Expand file tree",leadingVisual:s.ArrowLeftIcon,"data-hotkey":y.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:g,onClick:t,variant:h??"invisible",sx:{color:"fg.muted",px:2,display:"none","@media screen and (max-width: 768px)":{display:"block"}},children:"Files"}),(0,n.jsx)(l.L,{dataHotkey:y.hotkey,className:(0,d.$)({[r??""]:!0,"position-relative":!0,[p.expandButton]:!0,[p.filesButtonBreakpoint]:f&&(!e||w)}),expanded:e,alignment:"left",ariaLabel:e?"Collapse file tree":"Expand file tree",tooltipDirection:b,testid:"file-tree-button",ariaControls:u,ref:g,variant:h,onToggleExpanded:t}),(0,n.jsx)(a._,{buttonFocusId:m,buttonHotkey:y.hotkey,onButtonClick:t,onlyAddHotkeyScopeButton:!0})]})});m.displayName="ExpandFileTreeButton";var f=r(50437);function h({inputRef:e,onFindFilesShortcut:t,textAreaId:r}){let{sendRepoKeyDownEvent:l}=(0,f.T)(),{findFilesShortcut:o}=(0,i.wk)();return(0,n.jsx)(a._,{buttonFocusId:r,buttonHotkey:o.hotkey,onButtonClick:()=>{t?.(),e?.current?.focus(),l("GO_TO_FILE")}})}try{h.displayName||(h.displayName="FindFilesShortcut")}catch{}var x=r(77206),g=r(48840),y=r(23459),w=r(33387),b=r(39137),v=r(98063),C=r(4227),R=r(44063),j=r(1991),k=r(3029),N=r(46335),I=r(69676),E=r(75177),F=r(14616),S=r(87330),T=r(93653),A=r(47413),_=r(30729),O=r(27104);let $=(0,u.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});try{$.displayName||($.displayName="FileTreeContext")}catch{}var P=r(53413),D=r(77419),L=r(99083),q=r(94223),G=r(37354),B=r(30595);let V=(0,u.createContext)({});function W({children:e}){let t=(0,u.useRef)(!1),r=(0,u.useRef)(!1),a=(0,u.useRef)(!0),i=(0,u.useCallback)(e=>{t.current=e},[]),l=(0,u.useCallback)(e=>{r.current=e},[]),o=(0,u.useCallback)(e=>{a.current=e},[]),s=(0,u.useMemo)(()=>({expandAllFolders:t,refreshTree:r,shouldFetchFolders:a,setExpandAllFolders:i,setRefreshTree:l,setShouldFetchFolders:o}),[i,l,o]);return(0,n.jsx)(V.Provider,{value:s,children:e})}function M(){return(0,u.useContext)(V)}try{V.displayName||(V.displayName="FileTreeControlContext")}catch{}try{W.displayName||(W.displayName="FileTreeControlProvider")}catch{}var H=r(65556);function z(e,t,r){let n=[];for(let a of t)if(a.startsWith(e)){let t=a.slice(e.length+1),i=t.indexOf("/"),l=i>0?t.slice(0,i):t,o=`${e}/${l}`;if(r&&r.some(e=>e.path===o))continue;let s={items:[],data:{contentType:o===a?"file":"directory",name:l,path:o,isClientOnly:!0}};n.push(s)}return n}function U(e,t,r){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let n=t.name.slice(0,t.name.lastIndexOf("/")),a=n.indexOf("/")>-1,i={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:n,hasSimplifiedPath:a},l={items:[e],data:i};return(r.set(i.path,l),a)?U(l,{...i},r):l}function K(e,t,r,n){if(!e)return{newRootItems:r,rootItemsUpdated:!1};let a=!!e[""]&&Z("",t,r,e[""].items);for(let a of(n?.(r),Object.keys(e).sort()))if(a){let r=t.get(a);r&&(Z(a,t,r.items,e[a].items,n),r.data.totalCount=e[a].totalCount)}return{newRootItems:r,rootItemsUpdated:a}}function Z(e,t,r,n,a){let i=!1;for(let l of n){let n=e?`${e}/${l.name}`:l.name;if(!t.get(n)){let e={items:[],data:{...l}};if(t.set(n,e),l.hasSimplifiedPath){let n=U(e,l,t),o=r.findIndex(e=>e.data.path===n.data.path);-1!==o?n.items.length>r[o].items.length&&(r[o]=n,i=!0):(r.push(n),a?.(r))}else r.push(e),a?.(r)}}return i}function Y({isActive:e,file:t,onItemSelected:r,getItemUrl:a,selectedItemRef:i,navigate:l,onRenderRow:o,getFileTrailingVisual:c,getFileIcon:d}){let{sendRepoClickEvent:p}=(0,f.T)(),m=u.useRef(null),h=(0,L.Z)({focusRowRef:m,mouseRowRef:m}),x="submodule"===t.data.contentType,g=c?.(t.data),y=u.useCallback(n=>{x?(n.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):n.metaKey||n.ctrlKey||1===n.button?(window.open(a(t.data),"_blank"),n.preventDefault()):e?n.preventDefault():(r?.(),p("FILES_TREE.ITEM",{item_path:t.data.path}),l(a(t.data)),n.stopPropagation())},[t.data,a,e,x,l,r,p]);return o?.(),(0,n.jsxs)(G.G.Item,{ref:m,onSelect:y,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,n.jsx)(G.G.LeadingVisual,{children:d?d(t.data):x?(0,n.jsx)(s.FileSubmoduleIcon,{}):(0,n.jsx)(s.FileIcon,{})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{ref:i,style:{color:x?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:t.data.name}),h&&(0,n.jsx)(D.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:m,"aria-label":t.data.name,open:!0,direction:"ne"})]}),!!g?.screenReaderText&&(0,n.jsx)("span",{className:"sr-only",children:g.screenReaderText}),!!g?.trailingVisual&&(0,n.jsx)(G.G.TrailingVisual,{children:g.trailingVisual})]})}let J=u.memo(Y);function X({clientOnlyFilePaths:e,directory:t,isActive:r,isAncestorOfActive:a,leadingPath:i="",onItemSelected:l,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:p,onRenderRow:m,getFileTrailingVisual:h,getFileIcon:x,navigateOnClick:g=!0}){let{expandAllFolders:y,shouldFetchFolders:w}=M(),[b,v]=(0,u.useState)(y?.current||a),{sendRepoClickEvent:C}=(0,f.T)(),R=u.useRef(null),j=u.useRef(null),k=(0,L.Z)({focusRowRef:j,mouseRowRef:R}),[I,E,F,S,T,A,_]=function(e,t,r){let[n,a]=u.useState(e.items),[i,l]=u.useState(e.data.totalCount||0),[o,s]=u.useState(!1),[c,d]=u.useState(!1),{safeSetTimeout:p}=(0,H.A)();u.useEffect(()=>{a(e.items)},[e.items]),u.useEffect(()=>{void 0!==e.data.totalCount&&l(e.data.totalCount)},[e.data.totalCount]);let m=u.useCallback(()=>{d(!1)},[]),f=u.useCallback((e,t)=>{let r=e||[...n];a(r.slice(0,100)),p(()=>{a(r),void 0!==t&&l(t)},1)},[n,p]);return[u.useCallback(async n=>{let i=new Map;if(e.data.isClientOnly){if(n){let r=z(e.data.path,n);for(let e of r)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),r.length>100?f(r,r.length):(a(r),l(r.length))}}else{let o=r(e.data);d(!1),s(!0);let c=Date.now(),u=await (0,N.lS)(`${o}?noancestors=1`);try{if(u.ok){let r=await u.json(),o=r.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===r.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?U(t,e,i):t});if(n){let t=e.data.path,a=z(t,n,r.payload.tree.items);for(let e of(o.push(...a),a))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=r.payload.tree.totalCount,o.length>100?f(o,r.payload.tree.totalCount):(a(o),l(r.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}s(!1)},[r,e,t,f]),f,n,o,c,m,i]}(t,o,c),O=_-F.length,$=i?`${i}/`:"";(0,u.useEffect)(()=>{y?.current&&!b&&v(!0)},[t,y,b]);let P=u.useCallback(n=>{y?.current&&(y.current=!1),!n||b||S||T||(t.items.length>100?E():0!==t.items.length||r||a||w?.current===!1||I(e)),n!==b&&v(n)},[y,b,S,T,t.items.length,r,a,w,E,I,e]),q=u.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&g?(window.open(s(t.data),"_blank"),e.preventDefault()):r?e.preventDefault():(l?.(),C("FILES_TREE.ITEM",{item_path:t.data.path}),g?p(s(t.data)):P?.(!b),e.stopPropagation())},[t.data,s,r,b,p,g,l,P,C]);u.useEffect(()=>{a&&!b&&P?.(!0)},[a]),u.useEffect(()=>{0===t.items.length&&b?P?.(!1):!b&&t.autoExpand&&P?.(!0)},[t.items.length]);let B=u.useCallback(e=>{d&&r&&d(e),R.current=e},[d,r]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,n.jsx)(et,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:$+t.data.name,inheritsActive:r,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:g,getFileTrailingVisual:h,getFileIcon:x}):(m?.(),(0,n.jsxs)(G.G.Item,{ref:j,expanded:b,onExpandedChange:P,current:r,onSelect:q,id:`${t.data.path}-item`,containIntrinsicSize:r?void 0:"auto 2rem",children:[(0,n.jsx)(G.G.LeadingVisual,{children:(0,n.jsx)(G.G.DirectoryIcon,{})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{ref:B,children:[$,t.data.name]}),k&&(0,n.jsx)(D.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:j,"aria-label":`${$}${t.data.name}`,open:!0,direction:"ne"})]}),(0,n.jsx)(G.G.SubTree,{state:S?"loading":T?"error":"done",children:T?(0,n.jsx)(G.G.ErrorDialog,{onRetry:I,onDismiss:A,children:"There was an error loading the folder contents."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(et,{clientOnlyFilePaths:e,directoryItems:F,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:g,getFileTrailingVisual:h,getFileIcon:x}),O>0&&(0,n.jsx)(en,{message:`${O} entries not shown`})]})})]}))}let Q=u.memo(X);function ee({clientOnlyFilePaths:e,directoryItems:t,leadingPath:r,inheritsActive:a,onItemSelected:i,dispatchKnownFolders:l,selectedItemRef:o,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:p,directoryNavigateOnClick:m=!0}){let{path:f}=(0,P.eu)(),h=(0,b.Z)(),x=(0,q.Z)(),g=u.useRef(x);return(0,n.jsx)(n.Fragment,{children:t.map(t=>{let u=f===t.data.path,x=u||f.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,n.jsx)(Q,{clientOnlyFilePaths:e,isActive:a||u,isAncestorOfActive:x,onItemSelected:i,leadingPath:r,directory:t,dispatchKnownFolders:l,getItemUrl:c,getFetchUrl:h.getItemUrl,selectedItemRef:x?o:void 0,navigate:g.current,onRenderRow:s,navigateOnClick:m,getFileTrailingVisual:d,getFileIcon:p,itemCount:t.items.length},t.data.name):(0,n.jsx)(J,{onItemSelected:i,file:t,isActive:u,getItemUrl:c,selectedItemRef:u?o:void 0,navigate:g.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:p},t.data.name)})})}let et=u.memo(ee);function er(e){let{clientOnlyFilePaths:t,data:r,rootItems:a,setRootItems:i,fetchError:l,processingTime:o,loading:s,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:p,getFileIcon:m,sortDirectoryItems:f}=e,{knownFolders:h,dispatchKnownFolders:x}=(0,u.useContext)($),{refreshTree:g}=M();u.useEffect(()=>{if(s)return;let e=new Map,t=[];g?.current||(e=new Map(h),t=a.slice());let{newRootItems:n,rootItemsUpdated:l}=K(r,e,t,f);(n.length>a.length||l||g?.current)&&i(n),(e.size>h.size||g?.current)&&x({type:"set",folders:e,processingTime:o}),g?.current&&(g.current=!1)},[r,s]);let y=u.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,n.jsx)(E.A,{onMouseDown:y,sx:{px:3,pb:2,...e.sx},"data-testid":"repos-file-tree-container",children:s?(0,n.jsx)(E.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,n.jsx)(B.A,{"aria-label":"Loading file tree"})}):(0,n.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,n.jsxs)(G.G,{"aria-label":"Files",children:[l&&(0,n.jsx)(en,{message:"Some files could not be loaded."}),(0,n.jsx)(et,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:e.onItemSelected,dispatchKnownFolders:x,selectedItemRef:e.selectedItemRef,onRenderRow:c,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:d,getFileTrailingVisual:p,getFileIcon:m})]})})})}function en({message:e}){return(0,n.jsxs)(G.G.Item,{id:"error-tree-row",children:[(0,n.jsx)(G.G.LeadingVisual,{children:(0,n.jsx)(_.A,{icon:s.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,n.jsx)(E.A,{sx:{color:"fg.muted"},children:e||"Couldn't load."})]})}try{Y.displayName||(Y.displayName="WrappedFileTreeRow")}catch{}try{J.displayName||(J.displayName="FileTreeRow")}catch{}try{X.displayName||(X.displayName="WrappedDirectoryTreeRow")}catch{}try{Q.displayName||(Q.displayName="DirectoryTreeRow")}catch{}try{ee.displayName||(ee.displayName="WrappedDirectoryContents")}catch{}try{et.displayName||(et.displayName="DirectoryContents")}catch{}try{er.displayName||(er.displayName="ReposFileTreeView")}catch{}try{en.displayName||(en.displayName="ErrorTreeRow")}catch{}var ea=r(31871);function ei({sx:e,onClick:t,textAreaId:r}){let{searchShortcut:l}=(0,i.wk)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.K,{unsafeDisableTooltip:!0,"aria-label":"Search this repository",icon:s.SearchIcon,"data-hotkey":l.hotkey,sx:{color:"fg.subtle",fontSize:14,fontWeight:"normal",flexShrink:0,...e},size:"medium",onClick:e=>{t?.(),(0,ea.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})}}),(0,n.jsx)(a._,{buttonFocusId:r,buttonHotkey:l.hotkey,onButtonClick:()=>{let e=document.getElementById(r);t?.(),(0,ea.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},onlyAddHotkeyScopeButton:!0})]})}try{ei.displayName||(ei.displayName="SearchButton")}catch{}let el=j.Gy.xxxlarge;function eo({clientOnlyFilePaths:e,collapseTree:t,showTree:r,fileTree:a,treeToggleElement:i,treeToggleRef:l,onItemSelected:c,processingTime:d,searchBoxRef:p,repo:m,path:f,refInfo:v,isFilePath:P,foldersToFetch:D,id:L,onFindFilesShortcut:q,textAreaId:G,getItemUrlOverride:B,headerSx:V,paneSx:W,paneContentsSx:M,treeContainerSx:H,findFileWorkerPath:z,headerContent:U,getFileTrailingVisual:Z,getFileIcon:Y,sortDirectoryItems:J,showFindFile:X=!0,directoryNavigateOnClick:Q=!0,showRefSelectorRow:ee=!0,paneResizable:et=!0}){if(X&&void 0===z)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:en}=(0,w.Ak)(),[ea,eo]=u.useState(D.length>0),[ed,eu]=u.useState(!1),ep=u.useRef([]),em=u.useRef(null),ef=u.useRef(!1),eh=u.useRef(!1),ex=u.useRef(null),{query:eg}=(0,y.JS)(),ey=u.useRef(eg);ey.current=eg;let{codeCenterOption:ew}=(0,k.ud)(),eb=u.useRef(en),[ev]=(0,o.I)(()=>!1,!0,[]),{getItemUrl:eC}=(0,b.Z)(),eR=B||eC,ej=[],ek=new Map,eN=u.useRef(ea);!eN.current&&a&&(ej=K(a,ek,[],J).newRootItems),eN.current=!0;let[eI,eE]=u.useReducer(es,ek),[eF,eS]=u.useState(ej);u.useEffect(()=>{r&&(!eg||window.innerWidth>=j.Gy.large)||(ex.current=null)},[r,eg]),u.useEffect(()=>{en&&eb.current!==en&&window.innerWidth<el&&t({setPreference:!1}),eb.current=en},[t,en]);let eT=u.useCallback(async e=>{let t=eC({contentType:"directory",path:e,name:e});try{let r=await (0,N.lS)(`${t}?noancestors=1`);if(r.ok){let t=await r.json(),n={items:t.payload.tree.items,totalCount:t.payload.tree.totalCount};a[e]=n}else eu(!0)}catch{eu(!0)}ep.current.push(e),ep.current.length===D.length&&eo(!1)},[a,D.length,eC]);u.useEffect(()=>{if(D&&!ef.current)for(let e of D)eT(e);ef.current=!0},[eT,D,eI.size]);let eA=u.useCallback(e=>{r&&(!ey.current||window.innerWidth>=j.Gy.large)&&em.current&&e&&(0,I.Rt)(e,em.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[r]),e_=u.useCallback(e=>{e&&eh.current?eh.current=!1:ex.current!==e&&eA(e),ex.current=e},[eA]),eO=u.useCallback(e=>{em.current=e,window.innerWidth>=el&&eA(ex.current)},[eA]),e$=u.useCallback(e=>{e&&eA(ex.current)},[eA]),{screenSize:eP}=(0,j.lm)(),eD=!ev&&(en&&eP<el||eP<j.Gy.xlarge)&&eP>=j.Gy.large,eL=u.useCallback(()=>{eD||c(),eh.current=!0},[c,eD]),eq=r?{}:{display:"none"},eG=P?f.substring(0,f.lastIndexOf("/")):f,eB=(0,u.useMemo)(()=>({knownFolders:eI,dispatchKnownFolders:eE}),[eI]),eV=u.useMemo(()=>ev?null:(0,O.KF)(),[ev]),eW=u.useCallback(()=>{window.innerWidth>j.Gy.large&&window.innerWidth<j.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eM=(0,n.jsxs)(E.A,{id:L,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"},...M},children:[(0,n.jsxs)(E.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",px:3,pb:2,pt:3,...V},children:[U,ee&&(0,n.jsxs)(E.A,{sx:{mx:4,display:"flex",width:"100%"},children:[(0,n.jsx)(E.A,{sx:{flexGrow:1},children:(0,n.jsx)(g.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})}),(0,n.jsxs)(E.A,{sx:{ml:2,whiteSpace:"nowrap","&:hover button:not(:hover)":{borderLeftColor:"var(--button-default-borderColor-hover, var(--color-btn-hover-border))"}},children:[v.canEdit&&(0,n.jsx)(F.m,{text:"Add file","aria-label":"Add file",direction:"s",children:(0,n.jsx)(S.K,{unsafeDisableTooltip:!0,"aria-label":"Add file",as:R.N,sx:{color:"fg.subtle",borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},icon:s.PlusIcon,to:(0,C.IO9)({repo:m,path:eG,commitish:v.name,action:"new"}),onClick:eL})}),(0,n.jsx)(ei,{sx:v.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eW,textAreaId:G})]})]})]}),v.currentOid&&X&&z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.default,{commitOid:v.currentOid,findFileWorkerPath:z,onItemSelected:c,searchBoxRef:p,sx:{ml:3,mr:3,mb:"12px","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0}}),(0,n.jsx)(h,{inputRef:p,onFindFilesShortcut:q,textAreaId:G})]}),(0,n.jsx)(ec,{scrollingRef:em}),(0,n.jsxs)(E.A,{ref:eO,sx:{flexGrow:1,maxHeight:"100% !important",overflowY:"auto","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0,scrollbarGutter:"stable"},children:[ev?v.currentOid&&(0,n.jsx)("div",{className:eg?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,n.jsx)(er,{clientOnlyFilePaths:e,data:a,rootItems:eF,selectedItemRef:e_,setRootItems:eS,onItemSelected:eL,processingTime:d,loading:ea,fetchError:ed,directoryNavigateOnClick:Q,getItemUrl:eR,sx:H,getFileTrailingVisual:Z,getFileIcon:Y,sortDirectoryItems:J})}):eV&&(0,n.jsx)(O.bL,{node:eV}),!v.currentOid&&!m.isEmpty&&(0,n.jsxs)(E.A,{sx:{mt:2,mx:4,mb:"12px",fontSize:1,alignItems:"center",color:"danger.fg"},children:[(0,n.jsx)(_.A,{icon:s.AlertFillIcon}),"\xa0Ref is invalid"]})]})]}),eH=eD||en?{"@media print, screen and (max-width: 1349px) and (min-width: 768px)":{display:"none"}}:{"@media print, screen and (max-width: 1011px) and (min-width: 768px)":{display:"none"}};return(0,n.jsxs)($.Provider,{value:eB,children:[eV&&(0,n.jsx)(O.oj,{node:eV,children:v.currentOid&&(0,n.jsx)("div",{className:eg?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,n.jsx)(er,{clientOnlyFilePaths:e,data:a,directoryNavigateOnClick:Q,rootItems:eF,selectedItemRef:e_,setRootItems:eS,onItemSelected:eL,processingTime:d,loading:ea,fetchError:ed,getItemUrl:eR,sx:H,getFileTrailingVisual:Z,getFileIcon:Y,sortDirectoryItems:J})})}),!r&&ew.enabled&&i&&(0,n.jsx)(E.A,{sx:{position:"absolute",p:3,display:"none","@media screen and (min-width: 1360px)":{display:"block"}},children:i}),(0,n.jsx)(T.O7.Pane,{position:"start",sticky:!0,sx:{minWidth:0,...eq,"@media screen and (min-width: 768px)":{height:"100vh",maxHeight:"100vh !important"},...eH,...W},padding:"none",width:"large",resizable:!!et,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},children:r&&!eD&&(0,n.jsx)("div",{className:ev?en?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eM})}),r&&eD&&eb.current===en&&(0,n.jsx)(A.Ay,{className:ev?en?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,ref:e$,returnFocusRef:l,onClickOutside:eW,onEscape:eW,top:0,position:"fixed",sx:{...eq,width:"440px",height:"100vh",maxHeight:"100vh",borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,n.jsx)(n.Fragment,{children:eM})})]})}function es(e,t){switch(t.type){case"set":{let r=e?.size>0;return(0,v.BI)("file-tree",{"fetch-count":r?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":r?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let r=new Map([...e,...t.folders]);return(0,v.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":r.size,"nav-type":"fetch","processing-time":t.processingTime}),r}default:throw Error(`Unknown action type: ${t.type}`)}}function ec({scrollingRef:e}){let[t,r]=u.useState(e.current&&e.current.scrollTop>0);return u.useEffect(()=>{if(e.current){let t=e.current,n=()=>{t&&t.scrollTop>0?r(!0):r(!1)};return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}},[e]),t?(0,n.jsx)(E.A,{sx:{borderBottom:"1px solid",borderColor:"border.default",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.3)"}}):null}try{eo.displayName||(eo.displayName="ReposFileTreePane")}catch{}try{ec.displayName||(ec.displayName="TreeBorder")}catch{}var ed=r(74463),eu=r(46695),ep=r(87163),em=r(3167),ef=r(6499),eh=r(84217);function ex(e,t,r,a,i,l="fileTreeExpanded",o){let{sendRepoClickEvent:s}=(0,f.T)(),c=(0,ep.i)(),d=l?(0,eu.Ri)(l):void 0,p=!(void 0!==em.XC),h=!c&&d&&"false"!==d.value||c&&r;void 0===h&&(h=!1);let x=(0,u.useRef)(null),g=(0,u.useRef)(null),{screenSize:y}=(0,j.lm)(),[w,b]=(0,u.useState)(h),v=(0,u.useRef)(h),C=(0,u.useRef)(!1),R=(0,u.useRef)(!1),k=(0,u.useCallback)(()=>!(t.current&&window.innerWidth>=el||!t.current&&window.innerWidth>=j.Gy.xlarge),[t]);(0,ef.N)(()=>{let e=k();e||(C.current=!1),b((0,ed.q)()&&y<j.Gy.large&&!R.current||(!e||C.current)&&(c&&w||!c&&d?.value!=="false"))},[C,d?.value,y,t,k,c]),(0,ef.N)(()=>{let e=!t.current&&window.innerWidth<j.Gy.xlarge,r=!t.current&&window.innerWidth>=j.Gy.xlarge;e&&v.current&&!(0,ed.q)()&&w&&b(!1),r&&v.current&&!w&&b(!0)},[t,y]),(0,ef.N)(()=>{let e=t.current&&window.innerWidth<el,r=t.current&&window.innerWidth>=el;e&&v.current&&!(0,ed.q)()&&w&&b(!1),r&&v.current&&!w&&b(!0)},[t]);let N=(0,u.useCallback)(e=>{if(b(!0),k()&&(C.current=!0),e?.setPreference&&(i?.(!0),v.current=!0,l)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eu.TV)(l,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>x.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>g.current?.focus())},[l,2592e6,k,i]),I=(0,u.useCallback)(e=>{if(b(!1),C.current=!1,R.current=!0,e?.setPreference&&(i?.(!1),v.current=!1,l)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eu.TV)(l,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>x.current?.focus())},[l,2592e6,i]),E=(0,u.useCallback)(e=>e&&window.innerWidth>=el||!t.current&&window.innerWidth>=j.Gy.xlarge,[t]),F=(0,u.useMemo)(()=>(0,n.jsx)(eh.A,{as:"h2",sx:{display:"flex",fontSize:1},children:(0,n.jsx)(m,{expanded:w,ariaControls:e,onToggleExpanded:()=>{s(w?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),w?I({focus:"toggleButton",setPreference:E(t.current)}):N({focus:"toggleButton",setPreference:E(t.current)})},className:void 0!==d||w||p?void 0:"react-tree-toggle-button-with-indicator",ref:x,textAreaId:a,...o})}),[w,e,d,p,a,o,s,I,E,t,N]);return{isTreeExpanded:w,expandTree:N,collapseTree:I,treeToggleElement:F,treeToggleRef:x,searchBoxRef:g}}},99083:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(96540);function a({focusRowRef:e,mouseRowRef:t}){let[r,a]=n.useState(!1);return n.useEffect(()=>{if(e.current&&t.current){let r=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{r()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{r()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),r}},53665:(e,t,r)=>{r.d(t,{_:()=>a});var n=r(74848);function a({buttonFocusId:e,buttonHotkey:t,onButtonClick:r,buttonTestLabel:a,onlyAddHotkeyScopeButton:i}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{hidden:!0,"data-testid":a||"","data-hotkey":t,onClick:r,"data-hotkey-scope":e}),!i&&(0,n.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:r})]})}try{a.displayName||(a.displayName="DuplicateOnKeydownButton")}catch{}},77206:(e,t,r)=>{r.r(t),r.d(t,{FileResultRow:()=>L,default:()=>P});var n=r(74848),a=r(23459),i=r(53413),l=r(50437),o=r(39137),s=r(16563),c=r(63599),d=r(4227),u=r(44063),p=r(1991),m=r(94223),f=r(69676),h=r(38621),x=r(82678),g=r(75177),y=r(65481),w=r(8338),b=r(34614),v=r(85349),C=r(30595),R=r(30729),j=r(91385),k=r(96540),N=r(1828),I=r(5225);let E=(0,I.A)(j.fN);function F({data:e}){let{query:t,baseList:r,startTime:n}=e,a=t.replaceAll("\\","");return{query:t,list:r.filter(e=>""===a||(0,j.qA)(a,e)&&E(a,e)>0).sort((e,t)=>E(a,t)-E(a,e)),baseCount:r.length,startTime:n}}var S=r(74463),T=r(46335);async function A(e){let t=await (0,T.lS)(e);return t.ok?await t.json():void 0}let _=new Map,O=(0,I.A)(A,{cache:_}),$={excludeDirectories:!1,excludeSeeAllResults:!1};function P({actionListSx:e,additionalResults:t,commitOid:r,config:u=$,findFileWorkerPath:h,getItemUrl:C,onRenderRow:R,onItemSelected:j,searchBoxRef:I,sx:E}){let{excludeDirectories:T,excludeSeeAllResults:A}=u,{query:_,setQuery:P}=(0,a.JS)(),L=(0,s.t)(),q=k.useRef(null),G=I??q,[V,W]=k.useState(_.length>0),[M,H]=k.useState(!!_),{list:z,directories:U,loading:K,error:Z}=function(e,t,r){let n=(0,s.t)(),[a,i]=(0,k.useState)({list:[],directories:[],loading:!0}),l=(0,d.ClY)({repo:n,commitOid:e,includeDirectories:!r});return(0,k.useEffect)(()=>{let e=!1,r=async()=>{i({list:[],directories:[],loading:!0});let t=await O(l);if(e)return;let r=t?.paths||[],n=t?.directories||[];i({list:r.concat(n).sort(),directories:n,error:!t})};return t&&r(),function(){e=!0}},[l,t,r]),a}(r,V,!!T),{path:Y}=(0,i.eu)(),{getUrl:J}=(0,o.Z)(),{queryText:X,queryLine:Q}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(_),{matches:ee,clearMatches:et}=function(e,t,r,n){let[a,i]=k.useState(),o=k.useRef(""),s=k.useRef(),{sendStats:c}=(0,l.T)(),d=k.useRef(!1),u=k.useCallback(()=>{let e=new N.z(r,F);e.onmessage=({data:e})=>{d.current=!1,i(e.list),o.current=e.query,e.startTime&&c("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[c,r]);return k.useEffect(()=>{if(n)return u(),function(){s.current?.terminate()}},[u,n]),k.useEffect(()=>{if(e.length&&t){d.current&&(s.current?.terminate(),u());let r=o.current&&t.startsWith(o.current);d.current=!0,s.current?.postMessage({baseList:r&&a||e,query:t,startTime:performance.now()})}},[e,t,u]),{matches:a,clearMatches:()=>i(void 0)}}((0,k.useMemo)(()=>[...z,...t??[]].sort(),[t,z]),X,h,V),{sendRepoClickEvent:er}=(0,l.T)(),en=(0,m.Z)(),[ea,ei]=k.useState(0),[el,eo]=k.useState(()=>(0,S.q)()),es=k.useRef(null),ec=k.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:eu}=(0,l.T)(),{screenSize:ep}=(0,p.lm)(),em=u.enableOverlay??ep>=p.Gy.large,ef=k.useCallback(e=>{er("FILE_TREE.SEARCH_RESULT_CLICK"),j?.(e),H(!1)},[er,j]),eh=(e,t,r)=>C?C(e,t,r):J({path:e,action:t?"tree":"blob",hash:r}),{containerRef:ex}=(0,x.G)({bindKeys:f.z0.ArrowVertical|f.z0.HomeAndEnd,focusInStrategy:"previous"},[K,Z]);k.useEffect(()=>{_||H(!1)},[_]),k.useEffect(()=>{document.activeElement!==G.current&&em&&H(!1)},[Y,G,em]);let eg=ee?.slice(0,40)||[],ey=ee&&ee.length>eg.length,ew=(0,n.jsx)(g.A,{sx:{maxHeight:em?"60vh":"100% !important",overflowY:"auto",scrollbarGutter:"stable",maxWidth:"100vw","@media (max-width: 768px)":{ml:3,mr:2}},children:Z?(0,n.jsx)(y.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,n.jsxs)(w.l,{ref:ex,sx:{overflow:"auto",p:em?2:3,width:"100%",pr:em?3:0,pt:em?3:"2px !important",...e},role:"listbox",children:[!K&&eg.map((e,t)=>{let r=U.includes(e),a=eh(e,r,Q?`L${Q}`:"");return(0,n.jsx)(B,{active:e===Y,index:t,focused:el&&ea===t,match:e,onRender:R,query:X,onClick:ef,isDirectory:r,to:a,useOverlay:em,listRef:ex},e)}),(0,n.jsxs)("div",{className:"m-3 text-center",children:[(0,n.jsx)(D,{loading:K||!ee,visibleResultCount:eg.length,truncated:!!ey}),ey&&!A&&(0,n.jsxs)(n.Fragment,{children:["\xa0",(0,n.jsx)(b.A,{id:"see-all-results-link",className:"focus-visible",ref:es,href:(0,d.Y8Y)({owner:L.ownerLogin,repo:L.name,searchTerm:`path:${X}`}),sx:el&&ea===eg.length?{outline:"2px solid var(--focus-outlineColor, var(--color-accent-fg))",outlineOffset:"-2px",boxShadow:"none"}:{},children:"See all results"})]})]})]})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.A,{ref:ec,sx:{mx:2,...E},children:(0,n.jsx)(S.Z,{ariaActiveDescendant:(!em&&_||em&&M)&&el&&ea>-1?ey&&ea===eg.length?"see-all-results-link":`file-result-${ea}`:void 0,ariaExpanded:em?M:void 0,ariaHasPopup:em,ariaControls:em?ed:void 0,ref:G,query:_,onKeyDown:e=>{let{key:t,shiftKey:r,metaKey:n,altKey:a,ctrlKey:i}=e;if(!r&&!n&&!a){if("Escape"===t)_?(eu("FILE_TREE.CANCEL_SEARCH"),P(""),et()):document.activeElement&&document.activeElement.blur();else if(!_)return;else if("Enter"===t){if(!A&&ey&&ea===eg.length)en((0,d.Y8Y)({owner:L.ownerLogin,repo:L.name,searchTerm:`path:${X}`})),j?.();else if(eg[ea]){let e=eg[ea];en(eh(eg[ea],!1,Q?`L${Q}`:"")),H(!1),j?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!A&&ey&&ea>=eg.length-1){if(ei(eg.length),es.current&&ex.current){let e=(0,c.U)(ex.current);(0,f.Rt)(es.current,e,{behavior:"instant"})}}else ei(Math.min(ea+1,eg.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){ei(Math.max(ea-1,0)),e.preventDefault();return}}},onPreload:()=>W(!0),onSearch:e=>{P(e),e?H(!0):(et(),H(!1)),ei(0)},onBlur:e=>{ex.current?.contains(e.relatedTarget)||(H(!1),eo(!1))},onFocus:()=>{_&&H(!0),eo(!0)},sx:{minWidth:"160px"}})}),em&&(0,n.jsx)(v.T,{anchorRef:ec,open:em&&M,renderAnchor:null,onClose:()=>{H(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:ed,role:"dialog"},children:ew}),!em&&_&&ew]})}function D({visibleResultCount:e,truncated:t,loading:r}){return(0,n.jsx)("span",{role:"status",className:r||t||0===e?void 0:"sr-only","aria-label":r?"Loading":void 0,children:r?(0,n.jsx)(C.A,{size:"large"}):0===e?"No matches found":t?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}let L=({active:e,focused:t,index:r,match:a,query:i,to:l,isDirectory:o,onClick:s,onRender:d,useOverlay:p,listRef:m})=>{let h=(0,j.Xq)(i,a);d?.();let x=k.useRef(null),y=o?q:G;k.useEffect(()=>{if(t&&x.current&&m?.current){let e=(0,c.U)(m.current);(0,f.Rt)(x.current,e,{behavior:"instant"})}},[t,m]);let b={};t&&(b={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let v=(0,k.useCallback)(()=>{s?.(a)},[a,s]);return(0,n.jsx)(w.l.Item,{id:`file-result-${r}`,ref:x,as:u.N,onSelect:v,to:l,active:e,sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...b},role:"option","data-focus-visible-added":t||void 0,tabIndex:p?-1:0,children:(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,n.jsx)(V,{text:a,positionsList:h,sx:{color:"fg.muted"},LeadingIcon:y})}),t&&(0,n.jsx)(g.A,{sx:{pl:1,whiteSpace:"nowrap",color:"fg.muted"},children:`Go to ${o?"folder":"file"}`})]})},a)},q=()=>(0,n.jsx)(R.A,{"aria-label":"Directory",icon:h.FileDirectoryFillIcon,sx:{color:"var(--treeViewItem-leadingVisual-iconColor-rest, var(--color-icon-directory))",mr:2},size:"small"}),G=()=>(0,n.jsx)(R.A,{"aria-label":"File",icon:h.FileIcon,className:"fgColor-muted mr-2",size:"small"}),B=k.memo(L);function V({text:e,positionsList:t,sx:r,LeadingIcon:a}){let i=[],l=0;for(let r of t){if(Number(r)!==r||r<l||r>e.length)continue;let t=e.slice(l,r);t&&i.push(W(t)),l=r+1,i.push((0,n.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[r]},r))}return i.push(W(e.slice(l))),(0,n.jsx)(g.A,{sx:r,children:(0,n.jsxs)(n.Fragment,{children:[a&&(0,n.jsx)(a,{}),i]})})}function W(e){return e.replaceAll("/","/\u200B")}try{P.displayName||(P.displayName="FileResultsList")}catch{}try{D.displayName||(D.displayName="FileResultsStatus")}catch{}try{L.displayName||(L.displayName="FileResultRow")}catch{}try{q.displayName||(q.displayName="DirectoryIcon")}catch{}try{G.displayName||(G.displayName="FileResultIcon")}catch{}try{B.displayName||(B.displayName="MemoizedFileResultRow")}catch{}try{V.displayName||(V.displayName="HighlightMatch")}catch{}},74463:(e,t,r)=>{r.d(t,{Z:()=>p,q:()=>m});var n=r(74848),a=r(70170),i=r(51571),l=r(50437),o=r(3167),s=r(38621),c=r(67138),d=r(75177),u=r(96540);let p=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:r,ariaHasPopup:o,onBlur:p,onFocus:f,onKeyDown:h,onPreload:x,onSearch:g,query:y,sx:w},b)=>{let{sendRepoClickEvent:v}=(0,l.T)(),[C,R]=u.useState(y),j=u.useRef((0,a.s)(e=>g(e),250));u.useEffect(()=>{R(y)},[y]);let k=y?(0,n.jsx)(c.A.Action,{onClick:()=>{v("FILE_TREE.CANCEL_SEARCH"),g("")},icon:s.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,n.jsx)(c.A,{autoFocus:m(),ref:b,value:C,onKeyDown:h,onChange:e=>{R(e.target.value),x(),j.current(e.target.value)},sx:{display:"flex",...w},"aria-label":"Go to file","aria-activedescendant":e,role:o?"combobox":void 0,"aria-controls":t,"aria-expanded":r,"aria-haspopup":o?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:"Go to file",leadingVisual:s.SearchIcon,trailingAction:k,trailingVisual:k?void 0:()=>(0,n.jsx)(i.E,{children:(0,n.jsx)(d.A,{sx:{mr:"-6px"},children:(0,n.jsx)("kbd",{children:"t"})})}),onFocus:e=>{x(),e.target.select(),f?.(e)},onBlur:p,onClick:()=>v("FILE_TREE.SEARCH_BOX")})});function m(){return"1"===new URLSearchParams(o.fV.search).get("search")}p.displayName="FilesSearchBox"},33387:(e,t,r)=>{r.d(t,{Ak:()=>p,cD:()=>u,iK:()=>d});var n=r(74848),a=r(33029),i=r(87163),l=r(10943),o=r(1991),s=r(96540);let c=(0,l.A)("localStorage"),d=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function u({children:e,payload:t,openPanelRef:r}){let l="blame"in t,u=(0,a.Hf)(t),p=(0,i.i)(),m=(0,s.useRef)(void 0),[f,h]=(0,s.useState)(()=>{let e=c.getItem("codeNavOpen");if(!p&&""!==e&&null!==e||p&&t.symbolsExpanded)return"codeNav"}),x=(l||u)&&"codeNav"===f?void 0:f;s.useEffect(()=>{r.current=x},[x,r]);let g=(0,s.useCallback)((e,t)=>{h(r=>(r&&m.current&&m.current.focus(),m.current=t,l||u&&"codeNav"===e?void 0:e))},[l,u]);!function(e){let{screenSize:t}=(0,o.lm)(),r=(0,s.useRef)(t);(0,s.useEffect)(()=>{let n=r.current>=o.Gy.large,a=r.current===t;t<o.Gy.large&&(n||a)&&e(void 0),r.current=t},[t,e])}(g);let y=(0,s.useMemo)(()=>({openPanel:x,setOpenPanel:g}),[x,g]);return(0,n.jsx)(d.Provider,{value:y,children:e})}function p(){return(0,s.useContext)(d)}try{d.displayName||(d.displayName="OpenPanelContext")}catch{}try{u.displayName||(u.displayName="OpenPanelProvider")}catch{}},63189:(e,t,r)=>{r.d(t,{L:()=>s});var n=r(74848),a=r(38621),i=r(87330),l=r(94977),o=r(20053);let s=r(96540).forwardRef(({expanded:e,testid:t,ariaLabel:r,ariaControls:s,onToggleExpanded:c,alignment:d,dataHotkey:u,className:p,tooltipDirection:m,variant:f},h)=>(0,n.jsx)(l.A,{"aria-label":r,id:`expand-button-${t}`,direction:m,children:(0,n.jsx)(i.K,{unsafeDisableTooltip:!0,ref:h,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":s,icon:e?"left"===d?a.SidebarExpandIcon:a.SidebarCollapseIcon:"left"===d?a.SidebarCollapseIcon:a.SidebarExpandIcon,"data-hotkey":u,onClick:e=>{c(e)},variant:f??"invisible",className:(0,o.$)(p,"fgColor-muted")})}));s.displayName="ExpandButton"},87454:(e,t,r)=>{r.d(t,{c9:()=>b,_$:()=>y,iU:()=>w,tV:()=>g});var n=r(74848),a=r(55847),i=r(34614),l=r(30729),o=r(38621),s=r(15691),c=r(97919),d=r(96540),u=r(72399),p=r(46335);let m=async(e,t,r)=>{try{return(await (0,p.DI)(e,{method:t,body:r})).ok}catch{return!1}},f=(e,t)=>m(e,"DELETE",x(t)),h=(e,t)=>m(e,"POST",x(t)),x=e=>{let t=new FormData;return t.append("feature",e),t};function g(e){let{alreadyRequested:t=!1,dismissed:r=!1,dismissedAt:n="",featureName:a="",requestPath:i=""}=e??{},[l,o]=(0,d.useState)(!1),[s,c]=(0,d.useState)(t),{addToast:p}=(0,u.Y6)(),m=async()=>{o(!0),await (s?f:h)(i,a)?c(!s):p({type:"error",message:"Something went wrong. Please try again later."}),o(!1)};return{inProgress:l,requested:s,dismissed:r,dismissedAt:n,toggleFeatureRequest:m}}function y({featureRequestInfo:e,learnMorePath:t,requestMessage:r,requestedMessage:a}){let{inProgress:i,requested:l,toggleFeatureRequest:o}=g(e);return e.showFeatureRequest?l?(0,n.jsx)(b,{inProgress:i,toggleFeatureRequest:o,requestedMessage:a}):(0,n.jsx)(w,{inProgress:i,toggleFeatureRequest:o,isEnterpriseRequest:e.isEnterpriseRequest,featureName:e.featureName,billingEntityId:e.billingEntityId,learnMorePath:t,requestMessage:r}):null}let w=({inProgress:e,toggleFeatureRequest:t,billingEntityId:r="",isEnterpriseRequest:a=!1,featureName:i,learnMorePath:l,requestMessage:o})=>{let{sendClickAnalyticsEvent:s}=(0,c.S)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{onClick:()=>{t();let e=a&&r?`ref_cta:ask_enterprise_owners_for_access;ref_loc:${i};enterprise_id:${r};`:`ref_cta:ask_admin_for_access;ref_loc:${i};`;s({category:"member_feature_request",action:`action.${i}`,label:e})},inProgress:e,isEnterpriseRequest:a}),o&&(0,n.jsx)(R,{message:o}),l&&(0,n.jsx)(C,{onClick:()=>{s({category:"suggestion",action:"click_to_read_docs",label:`ref_cta:learn_more;ref_loc:${i};`})},path:l})]})},b=({inProgress:e,toggleFeatureRequest:t,requestedMessage:r})=>(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(j,{message:r}),(0,n.jsx)(k,{onClick:t,inProgress:e})]}),v=({onClick:e,inProgress:t,isEnterpriseRequest:r})=>(0,n.jsx)(a.Q,{onClick:e,variant:"primary",disabled:t,...(0,s.G)("feature-request-request-button"),children:t?"Requesting...":r?"Ask enterprise owners for access":"Ask admin for access"}),C=({onClick:e,path:t})=>(0,n.jsx)(i.A,{href:t,onClick:e,...(0,s.G)("feature-request-learn-more-link"),children:"Learn more"}),R=({message:e})=>(0,n.jsx)("span",{children:e}),j=({message:e})=>(0,n.jsxs)("span",{className:"d-inline-block color-fg-subtle mr-1",children:[(0,n.jsx)(l.A,{icon:o.CheckIcon}),e]}),k=({onClick:e,inProgress:t})=>(0,n.jsx)(i.A,{className:"color-fg-danger text-semibold",as:"button",onClick:e,disabled:t,...(0,s.G)("feature-request-cancel-link"),children:t?"Cancelling...":"Remove request"});try{y.displayName||(y.displayName="FeatureRequest")}catch{}try{w.displayName||(w.displayName="RequestFeature")}catch{}try{b.displayName||(b.displayName="CancelFeatureRequest")}catch{}try{v.displayName||(v.displayName="RequestCTA")}catch{}try{C.displayName||(C.displayName="LearnMore")}catch{}try{R.displayName||(R.displayName="RequestMessage")}catch{}try{j.displayName||(j.displayName="RequestedMessage")}catch{}try{k.displayName||(k.displayName="RemoveRequestCTA")}catch{}},49003:(e,t,r)=>{r.d(t,{Y:()=>m});var n=r(74848),a=r(59299),i=r(44999),l=r(16255),o=r(20053),s=r(96540);let c=r(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-b39269ff-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,a.Jt)("fonts.normal"),(0,a.Jt)("colors.fg.onEmphasis"),(0,a.Jt)("colors.neutral.emphasisPlus"),(0,a.Jt)("radii.2"),(0,a.Jt)("space.3"),(0,a.Jt)("space.3"),(0,a.Jt)("space.3"),(0,a.Jt)("space.3"),i.A),d=()=>()=>void 0,u=()=>!1,p=()=>!0,m=(0,s.forwardRef)(function({direction:e="n",className:t,text:r,noDelay:a,align:i,wrap:m,open:f=!1,portalProps:h={},...x},g){let y=(0,s.useSyncExternalStore)(d,p,u),w=(0,o.$)(t,`tooltipped-${e}`,i&&`tooltipped-align-${i}-2`,a&&"tooltipped-no-delay",m&&"tooltipped-multiline",f&&"tooltipped-open");return y?(0,n.jsx)(l.Z,{...h,children:(0,n.jsx)(c,{ref:g,role:"tooltip","aria-label":r,"data-visible-text":r||x["aria-label"],...x,sx:{position:"fixed",zIndex:1,...x.sx},className:w})}):null});try{m.displayName||(m.displayName="ControlledTooltip")}catch{}},77419:(e,t,r)=>{r.d(t,{m:()=>s});var n=r(74848),a=r(69676),i=r(96540),l=r(49003),o=r(63599);let s=(0,i.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:r,anchorSide:s,anchorOffset:c,alignmentOffset:d,allowOutOfBounds:u,...p},m){let f=(0,i.useRef)(null);(0,i.useImperativeHandle)(m,()=>f.current);let h=(0,i.useRef)({left:0,top:0}),x=(0,i.useSyncExternalStore)((0,i.useCallback)(r=>{if(!f.current||!e.current||!t)return()=>void 0;let n=(0,o.U)(e.current);return n?.addEventListener("scroll",r),()=>{n?.removeEventListener("scroll",r)}},[e,t]),(0,i.useCallback)(()=>{if(!f.current||!e.current)return h.current;let t=(0,a.uG)(f.current,e.current,{align:r??"center",side:s??"outside-top",alignmentOffset:d??0,anchorOffset:c??0,allowOutOfBounds:u});return(t.left!==h.current.left||t.top!==h.current.top)&&(h.current=t),h.current},[e,d,c,r,s,u]),(0,i.useCallback)(()=>h.current,[]));return(0,n.jsx)(l.Y,{...p,ref:f,open:t,style:{position:"absolute",...x,...p.style}})});try{s.displayName||(s.displayName="PortalTooltip")}catch{}},3029:(e,t,r)=>{r.d(t,{T2:()=>s,cp:()=>m,ud:()=>h});var n=r(74848),a=r(10943),i=r(96540);let l=(0,a.A)("localStorage"),o="codeView.codeFolding",s="codeView.codeWrapping",c="codeView.centerView",d="codeView.openSymbolsOnClick",u=new Map([[o,"Show code folding buttons"],[s,"Wrap lines"],[c,"Center content"],[d,"Open symbols on click"]]),p=(0,i.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}}),m=({children:e})=>{let t=f(o,!0),r=f(s,!1),a=f(c,!1),l=f(d,!0),u=(0,i.useMemo)(()=>({codeFoldingOption:t,codeWrappingOption:r,codeCenterOption:a,openSymbolsOption:l}),[t,r,a,l]);return(0,n.jsx)(p.Provider,{value:u,children:e})};function f(e,t){let r=l.getItem(e),[n,a]=(0,i.useState)(()=>r?"true"===r:t),o=u.get(e)||"";return{name:e,enabled:n,setEnabled:a,label:o}}function h(){return(0,i.useContext)(p)}try{p.displayName||(p.displayName="CodeViewOptionsContext")}catch{}try{m.displayName||(m.displayName="CodeViewOptionsProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_feature-request_FeatureR-648c3b-63127fa16066.js.map